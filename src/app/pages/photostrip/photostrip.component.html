<div class="flex flex-row items-center w-full h-screen bg-amber-50">
  <div class="absolute inset-0 z-0 pointer-events-none grid-bg"></div>

  <div class="z-10 flex items-center justify-center w-1/2 h-full">
    <div id="photostrip" class="px-5 py-5 size-fit" [ngClass]="photostripClass" [ngStyle]="photostripStyle">
      <div *ngFor="let img of images" class="mt-1 mb-2">
        <img [src]="img" class="object-scale-down h-32 w-sm" />
      </div>
    </div>
  </div>

  <div class="z-10 w-1/2 h-full p-2">
    <div class="h-1/5"></div>

    <div class="flex flex-row flex-wrap items-center w-1/2 gap-2 color-selection h-1/5">
      <!-- Tailwind color chips -->
      <button *ngFor="let combo of colorRangeCombos" class="p-4 rounded-full ring-4 ring-white" [ngClass]="[
          'bg-' + combo.color + '-' + combo.range,
          bgMode === 'tailwind' && selectedTailwind === ('bg-' + combo.color + '-' + combo.range)
            ? 'ring-8 ring-black'
            : ''
        ]" (click)="changeColor(combo.color, combo.range)" aria-label="Tailwind color"></button>

      <!-- Hex color picker -->
      <div class="relative w-10 h-10 overflow-hidden rounded-full shadow-md ring-4 ring-pink-200"
        [ngClass]="bgMode === 'hex' ? 'ring-8 ring-black' : ''" style="
          background-image: linear-gradient(
            135deg,
            #fcd5ce,
            #fae1dd,
            #d8e2dc,
            #ece4db,
            #f0efeb
          );
          background-size: 200% 200%;
          animation: pastelPulse 5s ease infinite;
        " title="Pick a color">
        <input type="color" class="absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer" [value]="selectedHex"
          (change)="onColorPickerChange($event)" />
      </div>

      <!-- Image background chooser -->
      <div class="flex flex-row items-center gap-8">
        <button class="w-10 h-10 overflow-hidden border border-gray-300 rounded-full"
          [ngClass]="bgMode === 'image' && selectedImage === '/2.png' ? 'ring-8 ring-black' : ''"
          (click)="selectBackgroundImage('/2.png')" title="Background image">
          <img src="/2.png" class="object-cover w-full h-full" />
        </button>
        <button class="w-10 h-10 overflow-hidden border border-gray-300 rounded-full"
          [ngClass]="bgMode === 'image' && selectedImage === '/3.png' ? 'ring-8 ring-black' : ''"
          (click)="selectBackgroundImage('/3.png')" title="Background image">
          <img src="/3.png" class="object-cover w-full h-full" />
        </button>
        <button class="w-10 h-10 overflow-hidden border border-gray-300 rounded-full"
          [ngClass]="bgMode === 'image' && selectedImage === '/4.png' ? 'ring-8 ring-black' : ''"
          (click)="selectBackgroundImage('/4.png')" title="Background image">
          <img src="/4.png" class="object-cover w-full h-full" />
        </button>
      </div>

      <style>
        @keyframes pastelPulse {
          0% {
            background-position: 0% 50%;
          }

          50% {
            background-position: 100% 50%;
          }

          100% {
            background-position: 0% 50%;
          }
        }
      </style>
    </div>

    <div class="h-1/5"></div>

    <div class="h-1/5">
      <button
        class="z-10 border-4 border-black shadow-md size-min rounded-xl active:translate-y-2 animate-bounce hover:animate-none disabled:cursor-not-allowed enabled:cursor-pointer"
        (click)="downloadPhotoStrip()">
        <span
          class="block px-6 py-3 bg-pink-300 text-white font-bold rounded-md text-3xl border-b-8 border-pink-700 border-x-4 active:border-b-4 active:bg-pink-400 font-['Press_Start_2P'] text-nowrap">
          DOWNLOAD
        </span>
      </button>
    </div>
  </div>
</div>